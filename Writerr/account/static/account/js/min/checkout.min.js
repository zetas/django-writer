/*!
 * Writerr.co v1.2
 * Django Webapp to help students and instructors with research papers.
 * 
 * Last Modified: 05-19-2014
 * 
 * Created By: David Della Vecchia <ddv@qubitlogic.net>
 */
(function(){var a,b,c;c=function(a,b){var c,d;return c=$("#checkout_payment"),b.error?(c.find(".payment-errors").text(b.error.message),$("#checkout_submit").prop("disabled",!1),$("#checkout_submit").removeClass("disabled")):(d=b.id,c.find("#stripe_token").val(d),c.find("#cc_type").val(b.card.type),c.find("#last_4").val(b.card.last4),c.get(0).submit())},b=function(a){var b;return a.preventDefault(),b=$("#checkout_payment"),$("#checkout_submit").prop("disabled",!0),$("#checkout_submit").addClass("disabled"),$("#checkout_submit").html('Processing... <div id="loading"><span id="loading_cog" class="glyphicon glyphicon-cog"></span></div>'),window.Stripe.card.createToken(b,c)},a=function(a){var b,c,d,e;for(a+="",c=a.split("."),d=c[0],e=c.length>1?"."+c[1]:"",b=/(\d+)(\d{3})/;b.test(d);)d=d.replace(b,"$1,$2");return d+e},$(document).ready(function(){return $("#stripe_cc_owner").val($("#id_billing_name").val()),"personal"===window.account_type&&($("#license_count").html("1"),$("#license_cost").html("$5.00")),$("#checkout_submit").click(function(a){return b(a)}),$("#checkout_payment").submit(function(a){return b(a)}),$("#id_last_name").focusout(function(){var a,b,c;return c=$("#id_first_name"),""===c.val()?!1:(a=$("#id_billing_name"),b=$("#stripe_cc_owner"),a.val(c.val()+" "+$(this).val()),b.val(c.val()+" "+$(this).val()))}),$("#id_quantity").change(function(){var b,c,d;return b=$(this).val(),c=$("#sub_type_radio_0"),d=c.attr("checked")?5:50,$("#license_count").html(b),$("#license_cost").html("$"+a(b*d)+".00 ")}),$(".sub_type").change(function(){var a;return $("#price_type_header").html($(this).val()),"enterprise"===window.account_type?($("#license_count").html("0"),$("#license_cost").html("$0.00")):($("#license_count").html("1"),$("#license_cost").html("yearly"===$(this).val()?"$50.00":"$5.00")),a=$("#id_quantity").val(),""!==a?$("#id_quantity").val(""):void 0})})}).call(this);